<!-- 
  backpack_2d.launch, demo_backpack_2d.launch 파일을 합쳐놓은 파일 
  backpack_2d.launch은 demo_backpack_2d.launch에서만 불러와지는 launch파일로
  굳이 따로 나눠놓을 필요는 없다고 판단

  두 파일에서 robot_state_publisher:robot_state_publisher와 rosbag:play 노드는 지웠다.
  해당 노드들은 zzangdol_bringup 패키지나 zzangdol_bag 패키지에서 더 범용성있게 사용되기 떄문
-->


<launch>
  <arg name="bag_filename" default="$(eval eval ('_' + '_import_' + '_(\'datetime\')').datetime.now().strftime('%Y-%m-%d_%H:%M:%S'))"/>

  <node name="cartographer_node" pkg="cartographer_ros"
      type="cartographer_node" args="
          -configuration_directory $(find zzangdol_cartographer)/configuration_files
          -configuration_basename zzangdol_mapping.lua
          -save_state_filename $(find zzangdol_cartographer)/pbstream/$(bag_filename)_online.pbstream"
      output="screen">
    <remap from="imu" to="imu/data" />
  </node>

  <node name="cartographer_occupancy_grid_node" pkg="cartographer_ros"
      type="cartographer_occupancy_grid_node" args="-resolution 0.025" />

  <node name="rviz" pkg="rviz" type="rviz" required="true"
      args="-d $(find zzangdol_cartographer)/rviz/cartographer_2d.rviz" />

</launch>
